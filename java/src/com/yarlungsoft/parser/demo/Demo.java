package com.yarlungsoft.parser.demo;

import com.yarlungsoft.parser.fzphouse.PhouseFrameAccess;
import com.yarlungsoft.parser.util.CRC8;
import com.yarlungsoft.parser.util.Utility;

public class Demo {
	
	
	public static void main(String args[]){
		
		
		phouse_test();
	}
	
	private static void phouse_test(){
		byte frame01[] = {(byte)0xAA,(byte)0xFE,0x02,0x00,0x24,0x21,0x10,0x01,0x00,0x56,0x00,0x01,0x12,0x05,0x11,0x0F,0x2C,0x23,
							0x01,0x00,0x01,0x20,0x0D,0x0B,0x00,0x22,0x20,0x01,0x64,0x00,0x23,0x20,0x00,
								(byte)0xC7,(byte)0xDD,(byte)0xEE};
		
		byte frame02[] = {(byte)0xAA,(byte)0xFE,0x02,0x00,0x1D,0x21,0x10,0x01,0x00,0x56,0x00,0x02,0x12,0x05,0x11,0x0F,0x2C,0x23,
						0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
					(byte)0xFE,(byte)0xDD,(byte)0xEE};
		
		byte frame03[] = {(byte)0xAA,(byte)0xFE,0x02,0x00,0x2E,0x21,0x10,0x01,0x00,0x56,0x00,0x03,0x12,0x05,0x11,0x0F,0x2C,0x23,
				0x02,   0x01,0x00, 	0x31, 0x32, 0x31, 0x32, 0x31, 0x32, 0x31, 0x32, 0x33, 0x00,
						0x00,0x00, 	0x31, 0x32, 0x31, 0x32, 0x31, 0x32, 0x31, 0x32, 0x34, 0x00,
					(byte)0x7F,(byte)0xDD,(byte)0xEE};
		
		byte crc1 = CRC8.calcCrc8(frame01, 0, 33);
		byte crc2 = CRC8.calcCrc8(frame02, 0, 26);
		byte crc3 = CRC8.calcCrc8(frame03, 0, 43);
		
		System.out.println(0xff & crc1);
		System.out.println(0xff & crc2);
		System.out.println(0xff & crc3);
		
		/*
		System.out.println(new PhouseFrameAccess().parse("dtu/up/phouse/wltx/1.0.86.0/devices", frame01).toJson());
		System.out.println(new PhouseFrameAccess().parse("dtu/up/phouse/wltx/1.0.86.0/devices", frame02).toJson());
		System.out.println(new PhouseFrameAccess().parse("dtu/up/phouse/wltx/1.0.86.0/devices", frame03).toJson());
		*/
		
		String hex = "AAFE02004D31220000000001120907103415020301904347E6660203029040400000020303904326999A020304903F80000002030590400000000203069045CD280002030790422C00004EDDEE";
		
		System.out.println(new PhouseFrameAccess().parse("dtu/up/phouse/wltx/1.0.86.0/devices", Utility.hexStringToBytes(hex)).toJson());
	}	
}
